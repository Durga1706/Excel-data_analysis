# Charts: When and When not
## Bar chart:
   * When: To compare data across categories
   * When not: If there are too many categories or if the data is continuous
   * Type: Categorical, quantitative

## Line chart:
   * When: To show trend over time 
   * When not: When there is no relationship between data points
   * Type: Continuous, time series

## Donut chart:
   * When: To show the proportion of each category
   * When not: If there are too many categories or comparing data across groups
   * Type: Categorical, proportional

## Scatter plot:
   * When: To display the relationship between two variables
   * When not: If there is irrelavant relation or comparing multiple categories
   * Type: Continuous, bivariate

## Bar chart:
   * When: To compare data across categories
   * When not: If there are too many categories or if the data is continuous
   * Type: Categorical, quantitative



##  Calculated Column
### Combine two columns
[col 1] & "-" & [col 2]   -> Hello-World
[col1 ] - [col 2]   -> subtract columns

### Measure 
When we have measure it can be used everywhere, if in future column name changes we can edit that in measure it will be updated everywhere
we have a column called Sales, in 10 charts if we used sum of sales it has to be updated 10 times if Sales name changes in future

Sum([col])
Sum([col 1]) - Sum([col 2])

### Previous year sales
calculate( Sum([Sales Amount]), SAMEPERIODLASTYEAR([Date]) )


## Most used DAX functions
### Aggregated Function
1. sum/ sumx: 

    sum requires a single column, sumx requires table and an expression
    
    Eg. sum(Sales), sumx(Sales, sp-cp)

2. average/ averagex
3. min/ minx
4. max/ maxx
5. count/ distinctcount: 
   count: ignores blank values
   distinctcount counts blank values but all at one time only, if I have r, r, a, j, , , m distinctcount gives 4 as we have 4(r, a, j, ) distinct rows 


## Text functions
   ### Trim: removes spaces from text except for single spaces between words
   ### Upper & lower: text to upper and lower
   ### Concatenate: joinse two text strings into one
   ### "&": joins/ concatenate two or more strings to a single piece of code, 6/1/2023 to Jan-06-2023 then [month]&"-"&[date]&"-"[year]
   ### exact: returns True if two text strings matches

## Extract full month, day, year using format
month= format(doj, "MMMM") -> January, 3 M's for Jan
day format(doj, "DDDD")   -> Sunday
year= format(doj, "YYYY") ->2024, 2 Y's for 24


year(Sales[Date]) -> returns year


# if
if(Sales[DAY] in {"Sat", "Sun"}, "Weekend", "Regular")


## Ref: https://www.youtube.com/watch?v=LQBUhnT6ITI
## Calender
### calendarauto(): returns a single column named 'Date' that contains a contiguous set of dates. The range of dates is calculated automatically based on data in the model.
syntax: calendarauto() : generates date based on our model
        calendarauto([fiscal_year_end_month]): dax expression that returns an integer from 1 to 12

If our date column has min date: 1-3-2023, max date: 1-3-2024
Start date: 1st month and day of min data year(1-1-2023)
End date: last month and day of max data year(31-12-2024)

fiscal_year_end_month can't be end before max date in data model
If our date is 31/12/2022, calendarauto(3)  then 31/3/2023 since our fiscal_year_end_month< max_date 
                           calendarauto(1)  then 31/1/2023 since our fiscal_year_end_month< max_date 
               1/3/2022,   calendarauto(3)  then 31/3/2022 since our fiscal_year_end_month= max_date 

Note: Date column should exist in our data model, otherwise it will give error

### calendar(): returns a single column named 'Date' that contains a contiguous set of dates.
syntax: calendar(<start_date>, <end_date>)
Eg: calendar(date(2022,01,01), date(2022,12,31))  :- date(yy,mm,dd)
    calendar(date(2022,01,01), date(2022,12,40)) : generates dates from 2022 jan 1 to 2023 jan 9; 40-31=9 adds 9 days next month


### now vs today
now returns current date and time, but today gives current date

### date diff
Let's say we have two date columns order date, end date
Day diff:-  datediff( restaurent[order date], restaurent[end date], day)- it will give how many days are between start and end date
week diff:- datediff( restaurent[order date], restaurent[end date], week)- it will give how many weeks are between start and end date
month diff:- datediff( restaurent[order date], restaurent[end date], month)- it will give how many months are between start and end date

Similarly we have quarter, year, second, hour, minute difference

### time vs timevalue
time Converts hours, minutes, and seconds given as numbers to a time in datetime format.
timevalue Converts a time in text format to a time in datetime format.

Syntax: TIME(hour, minute, second)
Syntax: TIMEVALUE(time_text)

### EDATE
returns the date that is the indicated no.of months before or after the start date
edate(1/1/2023, 1) returns 1 month after the date i.e, 1/2/2023
Syntax: EDATE(<start_date>, <months>)

### EOMONTH
Syntax: EOMONTH(<start_date>, <months>)
Returns the date in datetime format of the last day of the month, before or after a specified number of months.

eomonth(1/1/2020, 1) returns 28/2/2020 it returns next 1 month end  i.e feb last date
eomonth(2/1/2020, 2) returns 31/3/2020 it returns next 2 months end  i.e mar last date



### Filter Function
calculate
filter
all/ allexcept
keepfilters/ removefilter
lookupvalue



### Time Intelligence & Date Time
totalytd/ totalqtd/ totalmtd
dateadd/ datesbetween/ datesinperiod
firstdate/ lastdate
year/ month/ day
today/ eomonth

### Relationship & Others
related/ relatedtable/ userelationship
isblank/ hasonevalue/ username
summarize/ group by
treats
rankx



## Filter Context


## Row Context
### measuring each row, not used in measures only used in calculated columns
if([Age]>=18, "Can Vote", "Can't vote")


## Calculate Function
Chennai Sales= calculate( Sum([Sales]), location= "Chennai")
All loc Sales= calculate( Sum([Sales]), all(location))
